doctype html
link(rel="stylesheet", href="styles/table.css", data-inline)
link(rel="stylesheet", href="styles/main.css", data-inline)

body(style={padding: "2rem"})
  - var task = changedFields.latest
  - var created = changedFields.changeType.created
  - var updated = changedFields.changeType.updated
  - var deleted = changedFields.changeType.deleted

  if task.ticketNumber
    p The merge task for #[b #{task.ticketNumber}] was #{created ? "created" : deleted ? "deleted" : "updated"}.
  else
    p The following merge task was #{created ? "created" : deleted ? "deleted" : "updated"}.

  h2(style={"margin-bottom": 0}) #{task.ticketNumber}
  p(style={"margin-top": 0})
    i #{task.description}

  table.table
    thead
      tr
        th(scope="col") Field
        th(scope="col") Change
    tbody
      each change, field in htmlDiff
        tr
          th(align="right", scope="row") #{field}
          td
            div.diff !{change}
